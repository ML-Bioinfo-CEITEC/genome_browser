<html>
    <head>
        <title>Gene search</title>
    </head>
    <body>
        <div style="width: 100%">
            <div style="width:200px; float: left;">
                <form method="POST" action="" nonvalidate>
                    {{ form.hidden_tag() }}
                    <p>
                        {{ form.chromozom.label }}<br>
                        {{ form.chromozom(size=16, value=chromozom_default) }}
                    </p>
                    <p>
                        {{ form.protein_name.label }}<br>
                        {{ form.protein_name(size=16, value=protein_default) }}
                    </p>
                    <p>
                        {{ form.gene_id.label }}<br>
                        {{ form.gene_id(size=16, value=gene_id_default) }}
                    </p>
                    <p>
                        {{ form.symbol.label }}<br>
                        {{ form.symbol(size=16, value=symbol_default) }}
                    </p>
                    <p>
                        {{ form.area_min.label }}<br>
                        {{ form.area_min(size=16, value=area_min_default) }}
                    </p>
                    <p>
                        {{ form.area_max.label }}<br>
                        {{ form.area_max(size=16, value=area_max_default) }}
                    </p>
                    <p>
                        {{ form.loc_min.label }}<br>
                        {{ form.loc_min(size=16, value=loc_min_default) }}
                    </p>
                    <p>
                        {{ form.loc_max.label }}<br>
                        {{ form.loc_max(size=16, value=loc_max_default) }}
                    </p>
                    <p>
                        {{ form.score_min.label }}<br>
                        {{ form.score_min(size=16, value=score_min_default) }}
                    </p>
                    <p>{{form.submit()}}</p>
                </form>
            </div>
            <!-- <div style="margin-left: 220px;">
                {%for key in rows[0].keys()%}
                    <a href="{{secondary_sort_asc_urls[key]}}">{{key}}</a>
                {%endfor%}
            </div> -->
            <!-- <div style="margin-left: 220px;">
                <h2>Flask-table table</h2>
                {{table}}
            </div> -->


            <div style="margin-left: 220px;">
                <!-- <h2>Custom table</h2> -->
                <table style="width:100%; border:1px solid lightgrey; border-collapse: collapse;">
                    <tbody>
                        <tr style="border: 1px solid lightgrey;">
                            {% for key, value in rows[0].items()%}
                                {% if key != 'Protein url'%}
                                <td>{{key}} <a href="{{primary_sort_asc_urls[key]}}">↥</a> <a href="{{primary_sort_desc_urls[key]}}">↧</a> <a href="{{secondary_sort_asc_urls[key]}}">↟</a> <a href="{{secondary_sort_desc_urls[key]}}">↡</a></td>
                                {%endif%}
                            {% endfor %}
                        </tr>    
                        {% for row in rows%}
                        <tr style="border: 1px solid lightgrey;">
                            {% for key, value in row.items()%}
                                <!-- TODO hardcoded protein_name and Protein url names - parametrize? -->
                                {% if (key == "protein_name" or key=='symbol')%}
                                <td><a href="{{row['Protein url']}}">{{value}}</a></td>
                                {%elif key == 'score'%}
                                <td>{{value|round(3, 'floor')}}</td>
                                {% elif key!= 'Protein url'%}
                                <td>{{value}}</td>
                                {%endif%}
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>



            <div style="margin-left: 220px;">
            {%if has_prev %}
            <a href="{{ prev_page_url }}">PREVIOUS</a>
            {% endif %}
            {%if has_next %}
            <a href="{{ next_page_url }}">NEXT</a>
            {% endif %}
            <div>Page {{page}} / {{pages}}</div>
            <a href="{{download_url}}">DOWNLOAD</a>
            </div>
            
        </div>
        
    </body>
</html>